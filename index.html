<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>PhotoEditor</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/heic2any@0.0.4/dist/heic2any.min.js"></script>
</head>
<body>
<div id="container">
  <div id="canvasContainer">
    <canvas id="canvas"></canvas>
    <div id="loadingSpinner" class="spinner hidden"></div>
  </div>

  <!-- Mobile Filter Groups (bottom tabs) -->
  <div id="mobileFilterGroups" class="mobile-only">
    <button class="filter-group-btn" data-group="upload">Upload</button>
    <button class="filter-group-btn" data-group="distortion">Distort</button>
    <button class="filter-group-btn" data-group="color">Color</button>
    <button class="filter-group-btn" data-group="tint">Tint</button>
    <button class="filter-group-btn" data-group="effects">Effects</button>
    <button class="filter-group-btn" data-group="actions">Actions</button>
  </div>

  <!-- Mobile Filter Panel (slides up when group selected) -->
  <div id="mobileFilterPanel" class="mobile-only hidden">
    <div class="mobile-panel-header">
      <h3 id="mobilePanelTitle">Filters</h3>
      <button id="closeMobilePanel">‚úï</button>
    </div>
    <div id="mobilePanelContent"></div>
  </div>

  <div id="controls">
    <div id="header">
      <h1>Photo Edit</h1>
      <div id="presetBtns">
        <button id="savePresetBtn" class="preset-btn">üíæ Save</button>
        <button id="loadPresetBtn" class="preset-btn">üìÇ Load</button>
      </div>
    </div>

    <div id="uploadSection">
      <input type="file" id="upload" accept="image/*,.heic,.heif">
      <span id="fileName">No image loaded</span>
    </div>

    <div class="section">
      <h3>Distortion & Shift</h3>
      <div class="control-row">
        <label>Displace</label>
        <input type="range" id="displace" min="0" max="200" value="0">
        <input type="number" class="value-input" data-slider="displace" min="0" max="200" value="0">
      </div>
      <div class="control-row">
        <label>Frequency</label>
        <input type="range" id="frequency" min="0.001" max="0.05" step="0.001" value="0.001">
        <input type="number" class="value-input" data-slider="frequency" min="0.001" max="0.05" step="0.001" value="0.001">
      </div>
      <div class="control-row">
        <label>RGB Shift</label>
        <input type="range" id="rgbShift" min="0" max="150" value="0">
        <input type="number" class="value-input" data-slider="rgbShift" min="0" max="150" value="0">
      </div>
      <div class="control-row">
        <label>Chromatic</label>
        <input type="range" id="chromatic" min="0" max="50" value="0">
        <input type="number" class="value-input" data-slider="chromatic" min="0" max="50" value="0">
      </div>
    </div>

    <div class="section">
      <h3>Color & Light</h3>
      <div class="control-row">
        <label>Brightness</label>
        <input type="range" id="brightness" min="0" max="3" step="0.1" value="1">
        <input type="number" class="value-input" data-slider="brightness" min="0" max="3" step="0.1" value="1">
      </div>
      <div class="control-row">
        <label>Contrast</label>
        <input type="range" id="contrast" min="0" max="3" step="0.1" value="1">
        <input type="number" class="value-input" data-slider="contrast" min="0" max="3" step="0.1" value="1">
      </div>
      <div class="control-row">
        <label>Saturation</label>
        <input type="range" id="saturation" min="0" max="3" step="0.1" value="1">
        <input type="number" class="value-input" data-slider="saturation" min="0" max="3" step="0.1" value="1">
      </div>
      <div class="control-row">
        <label>Vignette</label>
        <input type="range" id="vignette" min="0" max="100" value="0">
        <input type="number" class="value-input" data-slider="vignette" min="0" max="100" value="0">
      </div>
    </div>

    <div class="section">
      <h3>Tint (RGB)</h3>
      <div class="control-row">
        <label>Strength</label>
        <input type="range" id="tintStrength" min="0" max="100" value="0">
        <input type="number" class="value-input" data-slider="tintStrength" min="0" max="100" value="0">
      </div>
      <div class="tint-sliders">
        <div class="tint-row">
          <span class="tint-label">R</span>
          <input type="range" id="red" min="0" max="255" value="128">
          <input type="number" class="tint-input" data-slider="red" min="0" max="255" value="128">
        </div>
        <div class="tint-row">
          <span class="tint-label">G</span>
          <input type="range" id="green" min="0" max="255" value="128">
          <input type="number" class="tint-input" data-slider="green" min="0" max="255" value="128">
        </div>
        <div class="tint-row">
          <span class="tint-label">B</span>
          <input type="range" id="blue" min="0" max="255" value="128">
          <input type="number" class="tint-input" data-slider="blue" min="0" max="255" value="128">
        </div>
      </div>
    </div>

    <div class="section">
      <h3>Effects & Glitch</h3>
      <div class="control-row">
        <label>Pixelate</label>
        <input type="range" id="pixelate" min="1" max="50" value="1">
        <input type="number" class="value-input" data-slider="pixelate" min="1" max="50" value="1">
      </div>
      <div class="control-row">
        <label>Noise</label>
        <input type="range" id="noise" min="0" max="150" value="0">
        <input type="number" class="value-input" data-slider="noise" min="0" max="150" value="0">
      </div>
      <div class="control-row">
        <label>Random Pixels</label>
        <input type="range" id="random" min="0" max="100" value="0">
        <input type="number" class="value-input" data-slider="random" min="0" max="100" value="0">
      </div>
      <div class="control-row">
        <label>Block Glitch</label>
        <input type="range" id="block" min="0" max="40" value="0">
        <input type="number" class="value-input" data-slider="block" min="0" max="40" value="0">
      </div>
      <div class="control-row">
        <label>Edge Blend</label>
        <input type="range" id="edge" min="0" max="100" value="0">
        <input type="number" class="value-input" data-slider="edge" min="0" max="100" value="0">
      </div>
      <div class="control-row">
        <label>Posterize</label>
        <input type="range" id="posterize" min="1" max="256" value="256">
        <input type="number" class="value-input" data-slider="posterize" min="1" max="256" value="256">
      </div>
    </div>

    <div id="actionBtns">
      <button id="resetBtn" onclick="resetSliders()">‚ü≤ Reset</button>
      <button id="downloadBtn" onclick="downloadImage()">‚¨áÔ∏è Download</button>
    </div>
  </div>
</div>

<div id="presetModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" onclick="closePresetModal()">&times;</span>
    <h2 id="modalTitle">Save Preset</h2>
    <input type="text" id="presetName" placeholder="Preset name..." maxlength="30">
    <div id="presetList"></div>
    <div class="modal-buttons">
      <button onclick="confirmPreset()" id="confirmBtn">Save</button>
      <button onclick="closePresetModal()">Cancel</button>
    </div>
  </div>
</div>

  <div class="section">
  <h3>Pixel Strips</h3>
  
  <!-- Strip Direction -->
  <div class="control-row">
    <label>Direction</label>
    <select id="stripDirection">
      <option value="none">None</option>
      <option value="horizontal">Horizontal</option>
      <option value="vertical">Vertical</option>
      <option value="grid">Grid</option>
    </select>
  </div>

    
  <div class="control-row">
    <label>Strip Size</label>
    <input type="range" id="stripSize" min="1" max="200" value="10">
    <input type="number" class="value-input" data-slider="stripSize" min="1" max="200" value="10">
  </div>

    
  <div class="control-row">
    <label>Count</label>
    <input type="range" id="stripCount" min="1" max="50" value="5">
    <input type="number" class="value-input" data-slider="stripCount" min="1" max="50" value="5">
  </div>
  

  <div class="control-row">
    <label>Intensity</label>
    <input type="range" id="stripIntensity" min="0" max="100" value="50">
    <input type="number" class="value-input" data-slider="stripIntensity" min="0" max="100" value="50">
  </div>
</div>

<script src="script.js"></script>
</body>
</html>
